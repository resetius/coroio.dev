\doxysection{NNet\+::TWeb\+Socket\texorpdfstring{$<$}{<} TSocket \texorpdfstring{$>$}{>} Class Template Reference}
\hypertarget{class_n_net_1_1_t_web_socket}{}\label{class_n_net_1_1_t_web_socket}\index{NNet::TWebSocket$<$ TSocket $>$@{NNet::TWebSocket$<$ TSocket $>$}}


Implements a Web\+Socket protocol layer on top of a given socket.  




{\ttfamily \#include $<$ws.\+hpp$>$}

\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_n_net_1_1_t_web_socket_a36745522f809720a9bfa223de97f5514}{TWeb\+Socket}} (\mbox{\hyperlink{class_n_net_1_1_t_socket}{TSocket}} \&socket)
\begin{DoxyCompactList}\small\item\em Constructs a Web\+Socket instance wrapping the provided socket. \end{DoxyCompactList}\item 
\mbox{\hyperlink{struct_n_net_1_1_t_future}{TFuture}}$<$ void $>$ \mbox{\hyperlink{class_n_net_1_1_t_web_socket_a5028ec836b4e9c74cd9d1862b8450e10}{Connect}} (const std\+::string \&host, const std\+::string \&path)
\begin{DoxyCompactList}\small\item\em Initiates the Web\+Socket handshake. \end{DoxyCompactList}\item 
\mbox{\hyperlink{struct_n_net_1_1_t_future}{TFuture}}$<$ void $>$ \mbox{\hyperlink{class_n_net_1_1_t_web_socket_adef36f335a05589611bdbfcdd22286cf}{Send\+Text}} (std\+::string\+\_\+view message)
\begin{DoxyCompactList}\small\item\em Sends a text message as a Web\+Socket frame. \end{DoxyCompactList}\item 
\mbox{\hyperlink{struct_n_net_1_1_t_future}{TFuture}}$<$ std\+::string\+\_\+view $>$ \mbox{\hyperlink{class_n_net_1_1_t_web_socket_af34220618cf99f70debf1301dd502acb}{Receive\+Text}} ()
\begin{DoxyCompactList}\small\item\em Receives a text message from the Web\+Socket. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\subsubsection*{template$<$typename \mbox{\hyperlink{class_n_net_1_1_t_socket}{TSocket}}$>$\newline
class NNet\+::\+TWeb\+Socket$<$ TSocket $>$}
Implements a Web\+Socket protocol layer on top of a given socket. 

The \doxylink{class_n_net_1_1_t_web_socket}{TWeb\+Socket} class wraps an underlying socket (of type {\ttfamily \doxylink{class_n_net_1_1_t_socket}{TSocket}}) to implement the Web\+Socket handshake, sending, and receiving of text frames. It uses asynchronous operations (via \doxylink{struct_n_net_1_1_t_future}{TFuture}) for I/O, and it internally maintains a reader and writer.\hypertarget{class_n_net_1_1_t_web_socket_autotoc_md10}{}\doxysubsubsubsection{\texorpdfstring{Overview}{Overview}}\label{class_n_net_1_1_t_web_socket_autotoc_md10}

\begin{DoxyItemize}
\item \doxylink{class_n_net_1_1_t_web_socket_a5028ec836b4e9c74cd9d1862b8450e10}{Connect()} initiates the Web\+Socket handshake.
\item \doxylink{class_n_net_1_1_t_web_socket_adef36f335a05589611bdbfcdd22286cf}{Send\+Text()} sends a text frame.
\item \doxylink{class_n_net_1_1_t_web_socket_af34220618cf99f70debf1301dd502acb}{Receive\+Text()} receives a text frame.
\end{DoxyItemize}


\begin{DoxyTemplParams}{Template Parameters}
{\em \doxylink{class_n_net_1_1_t_socket}{TSocket}} & The underlying socket type used for network communication.\\
\hline
\end{DoxyTemplParams}
\hypertarget{class_n_net_1_1_t_web_socket_autotoc_md11}{}\doxysubsubsubsection{\texorpdfstring{Example\+: Minimal Web\+Socket Client}{Example\+: Minimal Web\+Socket Client}}\label{class_n_net_1_1_t_web_socket_autotoc_md11}

\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ <iostream>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ <coroio/ws.h>}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{template}<\textcolor{keyword}{typename}\ TSocket>}
\DoxyCodeLine{TFuture<void>\ WebSocketClientExample(TSocket\&\ socket)\ \{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{class_n_net_1_1_t_web_socket_a36745522f809720a9bfa223de97f5514}{TWebSocket<TSocket>}}\ ws(socket);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{co\_await}\ ws.Connect(\textcolor{stringliteral}{"{}echo.websocket.org"{}},\ \textcolor{stringliteral}{"{}/.ws"{}});}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ std::string\ message\ =\ \textcolor{stringliteral}{"{}Hello,\ WebSocket!"{}};}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{co\_await}\ ws.SendText(message);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ std::string\_view\ reply\ =\ \textcolor{keyword}{co\_await}\ ws.ReceiveText();}
\DoxyCodeLine{\ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Received:\ "{}}\ <<\ reply\ <<\ std::endl;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{co\_return};}
\DoxyCodeLine{\}}

\end{DoxyCode}
 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{class_n_net_1_1_t_web_socket_a36745522f809720a9bfa223de97f5514}\index{NNet::TWebSocket$<$ TSocket $>$@{NNet::TWebSocket$<$ TSocket $>$}!TWebSocket@{TWebSocket}}
\index{TWebSocket@{TWebSocket}!NNet::TWebSocket$<$ TSocket $>$@{NNet::TWebSocket$<$ TSocket $>$}}
\doxysubsubsection{\texorpdfstring{TWebSocket()}{TWebSocket()}}
{\footnotesize\ttfamily \label{class_n_net_1_1_t_web_socket_a36745522f809720a9bfa223de97f5514} 
template$<$typename \mbox{\hyperlink{class_n_net_1_1_t_socket}{TSocket}}$>$ \\
\mbox{\hyperlink{class_n_net_1_1_t_web_socket}{NNet\+::\+TWeb\+Socket}}$<$ \mbox{\hyperlink{class_n_net_1_1_t_socket}{TSocket}} $>$\+::\+TWeb\+Socket (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_n_net_1_1_t_socket}{TSocket}} \&}]{socket}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}



Constructs a Web\+Socket instance wrapping the provided socket. 


\begin{DoxyParams}{Parameters}
{\em socket} & The underlying socket that will be used for the Web\+Socket connection. \\
\hline
\end{DoxyParams}


\doxysubsection{Member Function Documentation}
\Hypertarget{class_n_net_1_1_t_web_socket_a5028ec836b4e9c74cd9d1862b8450e10}\index{NNet::TWebSocket$<$ TSocket $>$@{NNet::TWebSocket$<$ TSocket $>$}!Connect@{Connect}}
\index{Connect@{Connect}!NNet::TWebSocket$<$ TSocket $>$@{NNet::TWebSocket$<$ TSocket $>$}}
\doxysubsubsection{\texorpdfstring{Connect()}{Connect()}}
{\footnotesize\ttfamily \label{class_n_net_1_1_t_web_socket_a5028ec836b4e9c74cd9d1862b8450e10} 
template$<$typename \mbox{\hyperlink{class_n_net_1_1_t_socket}{TSocket}}$>$ \\
\mbox{\hyperlink{struct_n_net_1_1_t_future}{TFuture}}$<$ void $>$ \mbox{\hyperlink{class_n_net_1_1_t_web_socket}{NNet\+::\+TWeb\+Socket}}$<$ \mbox{\hyperlink{class_n_net_1_1_t_socket}{TSocket}} $>$\+::\+Connect (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{host}{, }\item[{const std\+::string \&}]{path}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Initiates the Web\+Socket handshake. 

Constructs and sends an HTTP GET request with the proper headers including a generated Web\+Socket key, then waits for the server\textquotesingle{}s response. The response is verified to contain the "{}101 Switching Protocols"{} status and a valid Sec-\/\+Web\+Socket-\/\+Accept header.


\begin{DoxyParams}{Parameters}
{\em host} & The target host name. \\
\hline
{\em path} & The resource path. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A \doxylink{struct_n_net_1_1_t_future}{TFuture} that completes when the handshake is successful. 
\end{DoxyReturn}

\begin{DoxyExceptions}{Exceptions}
{\em std\+::runtime\+\_\+error} & if the handshake fails. \\
\hline
\end{DoxyExceptions}
\Hypertarget{class_n_net_1_1_t_web_socket_af34220618cf99f70debf1301dd502acb}\index{NNet::TWebSocket$<$ TSocket $>$@{NNet::TWebSocket$<$ TSocket $>$}!ReceiveText@{ReceiveText}}
\index{ReceiveText@{ReceiveText}!NNet::TWebSocket$<$ TSocket $>$@{NNet::TWebSocket$<$ TSocket $>$}}
\doxysubsubsection{\texorpdfstring{ReceiveText()}{ReceiveText()}}
{\footnotesize\ttfamily \label{class_n_net_1_1_t_web_socket_af34220618cf99f70debf1301dd502acb} 
template$<$typename \mbox{\hyperlink{class_n_net_1_1_t_socket}{TSocket}}$>$ \\
\mbox{\hyperlink{struct_n_net_1_1_t_future}{TFuture}}$<$ std\+::string\+\_\+view $>$ \mbox{\hyperlink{class_n_net_1_1_t_web_socket}{NNet\+::\+TWeb\+Socket}}$<$ \mbox{\hyperlink{class_n_net_1_1_t_socket}{TSocket}} $>$\+::\+Receive\+Text (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Receives a text message from the Web\+Socket. 

Waits for an incoming frame, validates that it is a text frame, and returns its payload.

\begin{DoxyReturn}{Returns}
A \doxylink{struct_n_net_1_1_t_future}{TFuture} that yields a string\+\_\+view containing the text message. 
\end{DoxyReturn}

\begin{DoxyExceptions}{Exceptions}
{\em std\+::runtime\+\_\+error} & if a non-\/text frame is received. \\
\hline
\end{DoxyExceptions}
\Hypertarget{class_n_net_1_1_t_web_socket_adef36f335a05589611bdbfcdd22286cf}\index{NNet::TWebSocket$<$ TSocket $>$@{NNet::TWebSocket$<$ TSocket $>$}!SendText@{SendText}}
\index{SendText@{SendText}!NNet::TWebSocket$<$ TSocket $>$@{NNet::TWebSocket$<$ TSocket $>$}}
\doxysubsubsection{\texorpdfstring{SendText()}{SendText()}}
{\footnotesize\ttfamily \label{class_n_net_1_1_t_web_socket_adef36f335a05589611bdbfcdd22286cf} 
template$<$typename \mbox{\hyperlink{class_n_net_1_1_t_socket}{TSocket}}$>$ \\
\mbox{\hyperlink{struct_n_net_1_1_t_future}{TFuture}}$<$ void $>$ \mbox{\hyperlink{class_n_net_1_1_t_web_socket}{NNet\+::\+TWeb\+Socket}}$<$ \mbox{\hyperlink{class_n_net_1_1_t_socket}{TSocket}} $>$\+::\+Send\+Text (\begin{DoxyParamCaption}\item[{std\+::string\+\_\+view}]{message}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Sends a text message as a Web\+Socket frame. 


\begin{DoxyParams}{Parameters}
{\em message} & The text message to send. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A \doxylink{struct_n_net_1_1_t_future}{TFuture} that completes when the message has been sent. 
\end{DoxyReturn}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
coroio/ws.\+hpp\end{DoxyCompactItemize}
